<html>
  <head>
    <title>GGP.org - View</title>
    <meta name="description" content="General game playing is about playing games that you've never seen before. Watch intelligent computers play games against each other here!" />  
    <link rel="shortcut icon" href="http://www.ggp.org/favicon.ico">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Sans:bold">
    <link rel="stylesheet" type="text/css" href="/viewer/bellerophon.css" />
    <script type='text/javascript' src='//www.ggp.org/scripts/Analytics.js'></script>    
  </head>
  <body>
    <script type='text/javascript' src='//www.ggp.org/scripts/common/ResourceLoader.js'></script>
    <script type="text/javascript" src="/viewer/bellerophonHeader.js"></script>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">google.load('visualization', '1', {packages: ['corechart']});</script>

    <div id='header'></div>
    <br>
    <div style="margin-left: 25%; width: 50%">
    <p>Welcome to the experimental new GGP.org Viewer (codenamed Bellerophon). This is a unified
       viewing interface for all GGP content (players, games, matches, aggregate statistics) spanning
       game repositories, spectator servers, match hosts, etc.</p>       
    <p>For example, you can view matches:
       <ul>
         <li><a href="/view/apollo/matches/">signed by the Apollo gaming server</a>,
         <li><a href="/view/dresden/matches/">signed by the Dresden gaming server</a>,
         <li><a href="/view/unsigned/matches/">not signed by any gaming server</a>, 
         <li>or <a href="/view/all/matches">from any gaming server</a>.
       </ul>
    <p>This interface is still in-development. Please file bug reports.</p>
    </div>
    <br>
    <center>
      <div id="matches_viz" style="width:800px;height:300px;"></div>
    </center>
    
    <script type='text/javascript'>
      generateHeader(document.getElementById('header'));
      
      getTimeSeriesData = function (z) {
        return ResourceLoader.load_json('//database.ggp.org/statistics/'+z+'/overall').matchesStartedChart;
      }      

      // aqua, azure, beige, black, blue, brown, cyan
      // darkblue, darkcyan, darkgrey, darkgreen, darkkhaki, darkmagenta
      // darkolivegreen, darkorange, darkorchid, darkred, darksalmon,
      // darkviolet, fuchsia, gold, green, indigo, khaki, lightblue,
      // lightcyan, lightgreen, lightgrey, lightpink, lightyellow, lime
      // magenta, maroon, navy, olive, orange, pink, purple, violet, red
      // silver, white, yellow

      zApollo = ["Apollo", "green", getTimeSeriesData('90bd08a7df7b8113a45f1e537c1853c3974006b2')];      
      zArtemis = ["Artemis", "khaki", getTimeSeriesData('5bc94f8e793772e8585a444f2fc95d2ac087fed0')];
      zDresden = ["Dresden", "blue", getTimeSeriesData('f69721b2f73839e513eed991e96824f1af218ac1')];      
      zUnsigned = ["Unsigned", "silver", getTimeSeriesData('unsigned')];
      zSample = ["Sample", "grey", getTimeSeriesData('0ca7065b86d7646166d86233f9e23ac47d8320d4')];

      var zOrder = [zDresden, zApollo, zArtemis, zSample, zUnsigned];

      var zDataSets = [];
      var zDataLabels = [];
      var zDataColors = [];
      for (var i = 0; i < zOrder.length; i++) {        
        zDataLabels.push(zOrder[i][0]);
        zDataColors.push(zOrder[i][1]);
        zDataSets.push(zOrder[i][2]);
      }
      
      var data = new google.visualization.DataTable();
      data.addColumn('string', 'Date');
      for (var i = 0; i < zDataLabels.length; ++i) {
        data.addColumn('number', zDataLabels[i]);
      }
      data.addRows(zDataSets[0].length);
      for (var i = 0; i < zDataSets[0].length; ++i) {
        data.setCell(i, 0, (new Date(1240000000000+604800000*i)).toDateString());
      }
      for (var i = 0; i < zDataLabels.length; ++i) {
        var zData = zDataSets[i];
        for (var j = 0; j < zData.length; ++j) {
          data.setCell(j, i+1, zData[j]);
        }
      }
      
      new google.visualization.ColumnChart(document.getElementById('matches_viz')).
      draw(data,
           {title:"Weekly Matches by Host",
            width:800, height:300, isStacked:true,
            colors:zDataColors,
            hAxis: {showTextEvery:20}}
      );           
    </script>
  </body>  
</html>